- template_id: timeseries_template_1
  question_id: timeseries_template_1_question_1
  question_text: Power flow from NO1 to NO3; for 2025, weekly average, min, max
  reference_steps:
  - - args:
        query: NO1 - NO3
      name: iri_discovery
      output: urn:uuid:852b95c0-4c49-4ded-85b2-a8f2b610db30
      output_media_type: text/uri
      required_columns:
      - uri
  - - args:
        query: 'PREFIX cimr: <https://cim.ucaiug.io/rules#>
PREFIX cim: <https://cim.ucaiug.io/ns#>
PREFIX nc: <https://cim4.eu/ns/nc#>
SELECT ?mrid WHERE {
    ?analog cim:Measurement.PowerSystemResource <urn:uuid:852b95c0-4c49-4ded-85b2-a8f2b610db30>;
    cim:Measurement.measurementType "ThreePhaseActivePower-Flow-Estimated";
    cim:Analog.positiveFlowIn true ;
    cimr:Measurement.isInCognite true;
    cim:IdentifiedObject.mRID ?mrid.
}'
      name: sparql_query
      output: '{
  "head": {
    "vars": [
      "mrid"
    ]
  },
  "results": {
    "bindings": [
      {
        "mrid": {
          "type": "literal",
          "value": "9bb00fb1-4e7f-831a-e040-1e828c94e833"
        }
      }
    ]
  }
}'
      output_media_type: application/sparql-results+json
      required_columns:
      - mrid
      matches: call_C3qAMjRWOrBZCU4QyPOx3X5D
  - - args:
        mrid: 9bb00fb1-4e7f-831a-e040-1e828c94e833
      name: retrieve_time_series
      matches: call_oU7gHlH48L7IqDl4T9CVkUbc
  - - args:
        external_id: 9bb00fb1-4e7f-831a-e040-1e828c94e833_estimated_value
        aggregates:
        - average
        - min
        - max
        granularity: 1w
        start: 2025-01-01 00:00:00+00:00
        end: 2026-01-01 00:00:00+00:00
      name: retrieve_data_points
      matches: call_1MA7PL4KAPJ7riH2UrxseyZW
  status: success
  actual_steps:
  - name: autocomplete_search
    args:
      query: NO1
      result_class: nc:BiddingZone
      limit: 5
    id: call_McU1eeVy7OpLxuD6J07bvqBi
    status: success
    execution_timestamp: '2025-12-15T15:06:14Z'
    output: "{\n \"head\": {\n \"vars\": [\n \"iri\",\n \"name\",\n \"class\",\n \"\
      rank\"\n ]\n },\n \"results\": {\n \"bindings\": [\n {\n \"iri\": {\n \"type\"\
      : \"uri\",\n \"value\": \"urn:uuid:83aa03e5-5fd0-431c-b8dd-acc08c21ed6a\"\n\
      \ },\n \"name\": {\n \"type\": \"literal\",\n \"value\": \"NO1\"\n },\n \"class\"\
      : {\n \"type\": \"uri\",\n \"value\": \"https://cim4.eu/ns/nc#BiddingZone\"\n\
      \ },\n \"rank\": {\n \"datatype\": \"http://www.w3.org/2001/XMLSchema#float\"\
      ,\n \"type\": \"literal\",\n \"value\": \"0.01489\"\n }\n },\n {\n \"iri\":\
      \ {\n \"type\": \"uri\",\n \"value\": \"urn:uuid:173e9d6d-77c8-44e0-805f-dc2f773c61fb\"\
      \n },\n \"name\": {\n \"type\": \"literal\",\n \"value\": \"NO_NO2_DK1\"\n },\n\
      \ \"class\": {\n \"type\": \"uri\",\n \"value\": \"https://cim4.eu/ns/nc#BiddingZone\"\
      \n },\n \"rank\": {\n \"datatype\": \"http://www.w3.org/2001/XMLSchema#float\"\
      ,\n \"type\": \"literal\",\n \"value\": \"0.00000\"\n }\n }\n ]\n }\n}"
  - name: autocomplete_search
    args:
      query: NO3
      result_class: nc:BiddingZone
      limit: 5
    id: call_vMtXHDegeihqw1PjViNdh3M3
    status: success
    execution_timestamp: '2025-12-15T15:06:45Z'
    output: "{\n \"head\": {\n \"vars\": [\n \"iri\",\n \"name\",\n \"class\",\n \"\
      rank\"\n ]\n },\n \"results\": {\n \"bindings\": [\n {\n \"iri\": {\n \"type\"\
      : \"uri\",\n \"value\": \"urn:uuid:0f094148-164b-427a-a8e8-0c5f334688ae\"\n\
      \ },\n \"name\": {\n \"type\": \"literal\",\n \"value\": \"NO3\"\n },\n \"class\"\
      : {\n \"type\": \"uri\",\n \"value\": \"https://cim4.eu/ns/nc#BiddingZone\"\n\
      \ },\n \"rank\": {\n \"datatype\": \"http://www.w3.org/2001/XMLSchema#float\"\
      ,\n \"type\": \"literal\",\n \"value\": \"0.00433\"\n }\n }\n ]\n }\n}"
  - name: sparql_query
    args:
      query: "SELECT ?border ?meas ?mrid ?type ?posFlowIn ?isInCognite WHERE {\n BIND(<urn:uuid:83aa03e5-5fd0-431c-b8dd-acc08c21ed6a>\
        \ AS ?no1)\n BIND(<urn:uuid:0f094148-164b-427a-a8e8-0c5f334688ae> AS ?no3)\n\
        \ ?border a <https://cim4.eu/ns/nc#BiddingZoneBorder> ;\n <https://cim4.eu/ns/nc#BiddingZoneBorder.BiddingZoneOne>\
        \ ?no1 ;\n <https://cim4.eu/ns/nc#BiddingZoneBorder.BiddingZoneTwo> ?no3 .\n\
        \ ?meas a <https://cim.ucaiug.io/ns#Analog> ;\n <https://cim.ucaiug.io/ns#Measurement.PowerSystemResource>\
        \ ?border ;\n <https://cim.ucaiug.io/ns#Measurement.measurementType> ?type\
        \ ;\n <https://cim.ucaiug.io/ns#IdentifiedObject.mRID> ?mrid ;\n <https://cim.ucaiug.io/ns#Measurement.unitSymbol>\
        \ ?unit ;\n <https://cim.ucaiug.io/ns#Measurement.unitMultiplier> ?mult ;\n\
        \ <https://cim.ucaiug.io/ns#Analog.positiveFlowIn> ?posFlowIn .\n OPTIONAL\
        \ { ?meas <https://cim.ucaiug.io/rules#Measurement.isInCognite> ?isInCognite\
        \ }\n FILTER( ?type = \"ThreePhaseActivePower-Flow-Estimated\"^^xsd:string\
        \ || ?type = \"ThreePhaseActivePower\"^^xsd:string )\n}"
    id: call_C3qAMjRWOrBZCU4QyPOx3X5D
    status: success
    execution_timestamp: '2025-12-15T15:06:59Z'
    output: "{\n \"head\": {\n \"vars\": [\n \"border\",\n \"meas\",\n \"mrid\",\n\
      \ \"type\",\n \"posFlowIn\",\n \"isInCognite\"\n ]\n },\n \"results\": {\n \"\
      bindings\": [\n {\n \"border\": {\n \"type\": \"uri\",\n \"value\": \"urn:uuid:852b95c0-4c49-4ded-85b2-a8f2b610db30\"\
      \n },\n \"meas\": {\n \"type\": \"uri\",\n \"value\": \"urn:uuid:9bb00fb1-4e7f-831a-e040-1e828c94e833\"\
      \n },\n \"mrid\": {\n \"type\": \"literal\",\n \"value\": \"9bb00fb1-4e7f-831a-e040-1e828c94e833\"\
      \n },\n \"type\": {\n \"type\": \"literal\",\n \"value\": \"ThreePhaseActivePower-Flow-Estimated\"\
      \n },\n \"posFlowIn\": {\n \"datatype\": \"http://www.w3.org/2001/XMLSchema#boolean\"\
      ,\n \"type\": \"literal\",\n \"value\": \"true\"\n },\n \"isInCognite\": {\n\
      \ \"datatype\": \"http://www.w3.org/2001/XMLSchema#boolean\",\n \"type\": \"\
      literal\",\n \"value\": \"true\"\n }\n }\n ]\n }\n}"
  - name: retrieve_time_series
    args:
      mrid: 9bb00fb1-4e7f-831a-e040-1e828c94e833
      limit: 5
    id: call_oU7gHlH48L7IqDl4T9CVkUbc
    status: success
    execution_timestamp: '2025-12-15T15:07:05Z'
    output: "[\n {\n \"external_id\": \"9bb00fb1-4e7f-831a-e040-1e828c94e833_estimated_value\"\
      ,\n \"name\": \"Elspot NO1-NO3 MW_estimated_value\",\n \"is_string\": false,\n\
      \ \"metadata\": {\n \"unit\": \"MW\",\n \"measurement_type\": \"ThreePhaseActivePower\"\
      ,\n \"mrid\": \"9bb00fb1-4e7f-831a-e040-1e828c94e833\",\n \"unit_symbol\": \"\
      W\",\n \"timeseries_type\": \"estimated_value\",\n \"substation\": \"DIV_NCC\"\
      ,\n \"end_time\": \"\",\n \"topic\": \"observations_grid_power_no_ems_analog_active_power_res_1s_avro_v1\"\
      ,\n \"unit_multiplier\": \"M\",\n \"source\": \"eTerra\",\n \"subscription\"\
      : \"DIV_NCC\",\n \"device\": \"ELSPOT\"\n },\n \"unit\": \"MW\",\n \"asset_id\"\
      : 2296222851104770,\n \"is_step\": false,\n \"description\": \"ThreePhaseActivePower\"\
      ,\n \"security_categories\": [],\n \"data_set_id\": 5515145765342807,\n \"id\"\
      : 2314805086177702,\n \"created_time\": \"2023-06-13 21:11:59.579+00:00\",\n\
      \ \"last_updated_time\": \"2025-09-29 12:22:45.755+00:00\"\n }\n]"
  - name: retrieve_data_points
    args:
      external_id: 9bb00fb1-4e7f-831a-e040-1e828c94e833_estimated_value
      start: '2025-01-01T00:00:00Z'
      end: '2026-01-01T00:00:00Z'
      aggregates:
      - min
      - max
      - average
      granularity: 1week
    id: call_1MA7PL4KAPJ7riH2UrxseyZW
    status: success
    execution_timestamp: '2025-12-15T15:07:14Z'
    output: "{\n \"id\": 2314805086177702,\n \"externalId\": \"9bb00fb1-4e7f-831a-e040-1e828c94e833_estimated_value\"\
      ,\n \"isString\": false,\n \"isStep\": false,\n \"unit\": \"MW\",\n \"unitExternalId\"\
      : \"\",\n \"granularity\": \"1week\",\n \"datapoints\": [\n {\n \"timestamp\"\
      : \"2025-01-01 00:00:00\",\n \"max\": -22.4774875640869,\n \"min\": -634.605163574219,\n\
      \ \"sum\": -6079679.572650909\n },\n {\n \"timestamp\": \"2025-01-08 00:00:00\"\
      ,\n \"max\": -176.806610107422,\n \"min\": -592.054992675781,\n \"sum\": -7497037.204193115\n\
      \ },\n {\n \"timestamp\": \"2025-01-15 00:00:00\",\n \"max\": -48.8348274230957,\n\
      \ \"min\": -604.223022460938,\n \"sum\": -7033178.197429657\n },\n {\n \"timestamp\"\
      : \"2025-01-22 00:00:00\",\n \"max\": -93.4801940917969,\n \"min\": -638.378295898438,\n\
      \ \"sum\": -6409085.44443512\n },\n {\n \"timestamp\": \"2025-01-29 00:00:00\"\
      ,\n \"max\": -174.200958251953,\n \"min\": -591.80126953125,\n \"sum\": -5810485.415344238\n\
      \ },\n {\n \"timestamp\": \"2025-02-05 00:00:00\",\n \"max\": -129.160598754883,\n\
      \ \"min\": -583.906555175781,\n \"sum\": -5875491.905670166\n },\n {\n \"timestamp\"\
      : \"2025-02-12 00:00:00\",\n \"max\": -82.5265808105469,\n \"min\": -473.589019775391,\n\
      \ \"sum\": -4749596.438865662\n },\n {\n \"timestamp\": \"2025-02-19 00:00:00\"\
      ,\n \"max\": -94.3547592163086,\n \"min\": -553.544799804687,\n \"sum\": -6127722.962348938\n\
      \ },\n {\n \"timestamp\": \"2025-02-26 00:00:00\",\n \"max\": 39.375675201416,\n\
      \ \"min\": -495.355010986328,\n \"sum\": -5909059.358499527\n },\n {\n \"timestamp\"\
      : \"2025-03-05 00:00:00\",\n \"max\": -0.723251342773438,\n \"min\": -444.584655761719,\n\
      \ \"sum\": -5032459.175174713\n },\n {\n \"timestamp\": \"2025-03-12 00:00:00\"\
      ,\n \"max\": 53.3467674255371,\n \"min\": -367.410522460938,\n \"sum\": -3308910.4881810993\n\
      \ },\n {\n \"timestamp\": \"2025-03-19 00:00:00\",\n \"max\": 165.641891479492,\n\
      \ \"min\": -345.912719726563,\n \"sum\": -3240730.651639104\n },\n {\n \"timestamp\"\
      : \"2025-03-26 00:00:00\",\n \"max\": 81.5682983398438,\n \"min\": -420.76953125,\n\
      \ \"sum\": -5090794.093489647\n },\n {\n \"timestamp\": \"2025-04-02 00:00:00\"\
      ,\n \"max\": 66.1184768676758,\n \"min\": -415.227844238281,\n \"sum\": -4365653.5047190515\n\
      \ },\n {\n \"timestamp\": \"2025-04-09 00:00:00\",\n \"max\": 113.980033874512,\n\
      \ \"min\": -352.113433837891,\n \"sum\": -3703392.03900598\n },\n {\n \"timestamp\"\
      : \"2025-04-16 00:00:00\",\n \"max\": -23.1248321533203,\n \"min\": -418.720520019531,\n\
      \ \"sum\": -2175163.6172618866\n },\n {\n \"timestamp\": \"2025-04-23 00:00:00\"\
      ,\n \"max\": 66.5215454101563,\n \"min\": -409.330108642578,\n \"sum\": -4216380.705057085\n\
      \ },\n {\n \"timestamp\": \"2025-04-30 00:00:00\",\n \"max\": 36.223258972168,\n\
      \ \"min\": -443.705169677734,\n \"sum\": -2727791.800246954\n },\n {\n \"timestamp\"\
      : \"2025-05-07 00:00:00\",\n \"max\": -101.288871765137,\n \"min\": -464.468048095703,\n\
      \ \"sum\": -3374325.6654815674\n },\n {\n \"timestamp\": \"2025-05-14 00:00:00\"\
      ,\n \"max\": -65.273193359375,\n \"min\": -515.709655761719,\n \"sum\": -4706765.8790130615\n\
      \ },\n {\n \"timestamp\": \"2025-05-21 00:00:00\",\n \"max\": 2.4623658657074,\n\
      \ \"min\": -628.811157226562,\n \"sum\": -5354630.00902313\n },\n {\n \"timestamp\"\
      : \"2025-05-28 00:00:00\",\n \"max\": 86.4481430053711,\n \"min\": -648.408813476563,\n\
      \ \"sum\": -6994838.807719275\n },\n {\n \"timestamp\": \"2025-06-04 00:00:00\"\
      ,\n \"max\": 101.356071472168,\n \"min\": -586.686218261719,\n \"sum\": -13510767.91916069\n\
      \ },\n {\n \"timestamp\": \"2025-06-11 00:00:00\",\n \"max\": 163.898529052734,\n\
      \ \"min\": -556.988159179688,\n \"sum\": -14113734.887452226\n },\n {\n \"timestamp\"\
      : \"2025-06-18 00:00:00\",\n \"max\": 47.9553833007813,\n \"min\": -566.966491699219,\n\
      \ \"sum\": -5525602.276288301\n },\n {\n \"timestamp\": \"2025-06-25 00:00:00\"\
      ,\n \"max\": 82.483642578125,\n \"min\": -481.129364013672,\n \"sum\": -4503993.2934425045\n\
      \ },\n {\n \"timestamp\": \"2025-07-02 00:00:00\",\n \"max\": 4.44720029830933,\n\
      \ \"min\": -645.917663574219,\n \"sum\": -3699148.5399570465\n },\n {\n \"timestamp\"\
      : \"2025-07-09 00:00:00\",\n \"max\": 18.5413227081299,\n \"min\": -433.975158691406,\n\
      \ \"sum\": -2930218.747092165\n },\n {\n \"timestamp\": \"2025-07-16 00:00:00\"\
      ,\n \"max\": 9.86935138702393,\n \"min\": -466.966949462891,\n \"sum\": -4869006.952767938\n\
      \ },\n {\n \"timestamp\": \"2025-07-23 00:00:00\",\n \"max\": -79.1166152954102,\n\
      \ \"min\": -416.107727050781,\n \"sum\": -4550968.429283142\n },\n {\n \"timestamp\"\
      : \"2025-07-30 00:00:00\",\n \"max\": 206.594253540039,\n \"min\": -428.860229492188,\n\
      \ \"sum\": -3211479.5606954247\n },\n {\n \"timestamp\": \"2025-08-06 00:00:00\"\
      ,\n \"max\": 211.718780517578,\n \"min\": -428.881683349609,\n \"sum\": -1789749.3762937572\n\
      \ },\n {\n \"timestamp\": \"2025-08-13 00:00:00\",\n \"max\": 68.2974395751953,\n\
      \ \"min\": -23.84885597229,\n \"sum\": 120343.40388285261\n },\n {\n \"timestamp\"\
      : \"2025-08-20 00:00:00\",\n \"max\": 219.931503295898,\n \"min\": -8.17569255828857,\n\
      \ \"sum\": 955194.8288861046\n },\n {\n \"timestamp\": \"2025-08-27 00:00:00\"\
      ,\n \"max\": 183.314514160156,\n \"min\": -687.299377441406,\n \"sum\": -12165633.712079525\n\
      \ },\n {\n \"timestamp\": \"2025-09-03 00:00:00\",\n \"max\": 51.6008987426758,\n\
      \ \"min\": -627.613830566406,\n \"sum\": -16095338.66005943\n },\n {\n \"timestamp\"\
      : \"2025-09-10 00:00:00\",\n \"max\": 57.2205429077148,\n \"min\": -563.739929199219,\n\
      \ \"sum\": -10858557.12343351\n },\n {\n \"timestamp\": \"2025-09-17 00:00:00\"\
      ,\n \"max\": 205.345397949219,\n \"min\": -550.26513671875,\n \"sum\": -10393817.01633801\n\
      \ },\n {\n \"timestamp\": \"2025-09-24 00:00:00\",\n \"max\": 268.643463134766,\n\
      \ \"min\": -549.864868164063,\n \"sum\": -6616383.323891792\n },\n {\n \"timestamp\"\
      : \"2025-10-01 00:00:00\",\n \"max\": 318.965423583984,\n \"min\": -432.655151367188,\n\
      \ \"sum\": -1600749.2544672987\n },\n {\n \"timestamp\": \"2025-10-08 00:00:00\"\
      ,\n \"max\": -3.35211229324341,\n \"min\": -471.751831054688,\n \"sum\": -5144527.891113758\n\
      \ },\n {\n \"timestamp\": \"2025-10-15 00:00:00\",\n \"max\": 90.3368453979492,\n\
      \ \"min\": -471.285675048828,\n \"sum\": -3875047.637278557\n },\n {\n \"timestamp\"\
      : \"2025-10-22 00:00:00\",\n \"max\": 110.84740447998,\n \"min\": -483.147857666016,\n\
      \ \"sum\": -3056732.2498025894\n },\n {\n \"timestamp\": \"2025-10-29 00:00:00\"\
      ,\n \"max\": 109.893417358398,\n \"min\": -440.507598876953,\n \"sum\": -2343687.2623984218\n\
      \ },\n {\n \"timestamp\": \"2025-11-05 00:00:00\",\n \"max\": 120.950942993164,\n\
      \ \"min\": -401.896026611328,\n \"sum\": -2414128.2356422693\n },\n {\n \"timestamp\"\
      : \"2025-11-12 00:00:00\",\n \"max\": 100.14469909668,\n \"min\": -384.338897705078,\n\
      \ \"sum\": -1426443.203330338\n },\n {\n \"timestamp\": \"2025-11-19 00:00:00\"\
      ,\n \"max\": 120.508186340332,\n \"min\": 86.9833068847656,\n \"sum\": 362196.56188201904\n\
      \ },\n {\n \"timestamp\": \"2025-11-26 00:00:00\",\n \"max\": 120.065689086914,\n\
      \ \"min\": -473.767059326172,\n \"sum\": -3704030.113606751\n },\n {\n \"timestamp\"\
      : \"2025-12-03 00:00:00\",\n \"max\": -18.4274024963379,\n \"min\": -430.414184570312,\n\
      \ \"sum\": -3881328.2995967865\n },\n {\n \"timestamp\": \"2025-12-10 00:00:00\"\
      ,\n \"max\": -106.10661315918,\n \"min\": -416.067596435547,\n \"sum\": -1366852.111000061\n\
      \ }\n ]\n}"
  steps_score: 0.75
  input_tokens: 791569
  output_tokens: 15522
  total_tokens: 807091
  elapsed_sec: 205.36997318267822
